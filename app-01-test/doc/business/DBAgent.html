<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="fr">
<head>
<!-- Generated by javadoc (version 1.7.0_71) on Fri Feb 27 18:29:52 CET 2015 -->
<title>DBAgent</title>
<meta name="date" content="2015-02-27">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DBAgent";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DBAgent.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../business/Configuration.html" title="class in business"><span class="strong">Prev Class</span></a></li>
<li><a href="../business/DBMaintenanceJob.html" title="class in business"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?business/DBAgent.html" target="_top">Frames</a></li>
<li><a href="DBAgent.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">business</div>
<h2 title="Class DBAgent" class="title">Class DBAgent</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../business/Agent.html" title="class in business">business.Agent</a></li>
<li>
<ul class="inheritance">
<li>business.DBAgent</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">DBAgent</span>
extends <a href="../business/Agent.html" title="class in business">Agent</a></pre>
<div class="block">Gestionnaire de la base de donnees locale. a propos du schema: Pour la
 synchronisation des donnees d'identite de l'AD vers Safenet, on veut eviter
 de transferer l'integralite de la base, ou pire de l'annuaire. On garde donc
 un CRC des champs a synchroniser tels qu'ils sont dans la base Safenet, cela
 permet de detecter des modifications par rapport a l'annuaire sans interroger
 Safenet systematiquement (SOAP est inefficace). On garde egalement en local
 une date de dernier acces indiquee par Safenet. Elle permet de n'interroger
 Safenet que lorsque le compte semble sur le point de devoir être bloque. Le
 CUID sert de cle pour tout cela.
 
 Sur les details de mise en oeuvre, pour rappel:
 <ul>
 <li>il est interdit de mettre dans des chaines SQL des donnees provenant du
 client HTTP
 <li>il est recommande voire obligatoire d'utiliser des requêtes precompilees.
 <li>cette classe est un singleton, et il n'est pas garanti que les requêtes
 precomppilees sont compatibles multi-threads. Ceci enre en conflit avec la
 recommendation precedente. => a defaut de moyen de stockage propre a un flot
 de contrôle, on recompile tout a chaque requête
 <li>Autre consequence du multi-thread, la bascule de serveur doit être
 synchronisee, puisque toutes les requêtes doivent utiliser le même serveur.
 </ul></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../business/DBAgent.html#DBAgent(java.lang.String)">DBAgent</a></strong>(java.lang.String&nbsp;paramPath)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../business/DBAgent.html#countUsers(int,%20java.lang.String,%20java.lang.String)">countUsers</a></strong>(int&nbsp;projectId,
          java.lang.String&nbsp;roleId,
          java.lang.String&nbsp;cuid)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../business/DBAgent.html#createPrjUser(util.AdmAccount)">createPrjUser</a></strong>(<a href="../util/AdmAccount.html" title="class in util">AdmAccount</a>&nbsp;infos)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../business/DBAgent.html#createProject(java.lang.String)">createProject</a></strong>(java.lang.String&nbsp;projectName)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../business/DBAgent.html#createUser(util.OTPAccount)">createUser</a></strong>(<a href="../util/OTPAccount.html" title="class in util">OTPAccount</a>&nbsp;infos)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../util/AdmAccount.html" title="class in util">AdmAccount</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../business/DBAgent.html#getPrjAdmUsers(int,%20java.lang.String,%20int,%20int,%20java.lang.String,%20java.lang.String)">getPrjAdmUsers</a></strong>(int&nbsp;projectId,
              java.lang.String&nbsp;roleId,
              int&nbsp;begin,
              int&nbsp;end,
              java.lang.String&nbsp;cuid,
              java.lang.String&nbsp;lastName)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../util/ProjectData.html" title="class in util">ProjectData</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../business/DBAgent.html#getProjects()">getProjects</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../util/ProjectData.html" title="class in util">ProjectData</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../business/DBAgent.html#getProjects(java.lang.String,%20java.lang.String)">getProjects</a></strong>(java.lang.String&nbsp;cuid,
           java.lang.String&nbsp;roleId)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../util/SkillsData.html" title="class in util">SkillsData</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../business/DBAgent.html#getProjectSkills(java.lang.String)">getProjectSkills</a></strong>(java.lang.String&nbsp;cuid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../util/Person.html" title="class in util">Person</a></code></td>
<td class="colLast"><code><strong><a href="../business/DBAgent.html#getUser(java.lang.String)">getUser</a></strong>(java.lang.String&nbsp;cuid)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../util/OTPAccount.html" title="class in util">OTPAccount</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../business/DBAgent.html#getUsers(int,%20java.lang.String,%20int,%20int,%20java.lang.String,%20java.lang.String)">getUsers</a></strong>(int&nbsp;projectId,
        java.lang.String&nbsp;roleId,
        int&nbsp;begin,
        int&nbsp;end,
        java.lang.String&nbsp;cuid,
        java.lang.String&nbsp;lastName)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../business/DBAgent.html#removePrjUser(java.lang.String,%20int,%20java.lang.String)">removePrjUser</a></strong>(java.lang.String&nbsp;cuid,
             int&nbsp;projectId,
             java.lang.String&nbsp;roleId)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../business/DBAgent.html#removeProject(int)">removeProject</a></strong>(int&nbsp;projectId)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../business/DBAgent.html#removeUser(java.lang.String)">removeUser</a></strong>(java.lang.String&nbsp;cuid)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../business/DBAgent.html#removeUserActivity(java.lang.String)">removeUserActivity</a></strong>(java.lang.String&nbsp;cuid)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../business/DBAgent.html#updatePrjUser(util.AdmAccount)">updatePrjUser</a></strong>(<a href="../util/AdmAccount.html" title="class in util">AdmAccount</a>&nbsp;infos)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../business/DBAgent.html#updateProject(util.ProjectData)">updateProject</a></strong>(<a href="../util/ProjectData.html" title="class in util">ProjectData</a>&nbsp;infos)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../business/DBAgent.html#updateUserActivity(java.lang.String,%20boolean)">updateUserActivity</a></strong>(java.lang.String&nbsp;cuid,
                  boolean&nbsp;isActive)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_business.Agent">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;business.<a href="../business/Agent.html" title="class in business">Agent</a></h3>
<code><a href="../business/Agent.html#getParameter(java.lang.String)">getParameter</a>, <a href="../business/Agent.html#reloadParameters()">reloadParameters</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DBAgent(java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DBAgent</h4>
<pre>public&nbsp;DBAgent(java.lang.String&nbsp;paramPath)
        throws java.io.IOException,
               java.lang.ClassNotFoundException,
               java.sql.SQLException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code>java.lang.ClassNotFoundException</code></dd>
<dd><code>java.sql.SQLException</code></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getProjects(java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getProjects</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../util/ProjectData.html" title="class in util">ProjectData</a>&gt;&nbsp;getProjects(java.lang.String&nbsp;cuid,
                                      java.lang.String&nbsp;roleId)</pre>
</li>
</ul>
<a name="getProjects()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getProjects</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../util/ProjectData.html" title="class in util">ProjectData</a>&gt;&nbsp;getProjects()</pre>
</li>
</ul>
<a name="getProjectSkills(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getProjectSkills</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../util/SkillsData.html" title="class in util">SkillsData</a>&gt;&nbsp;getProjectSkills(java.lang.String&nbsp;cuid)</pre>
</li>
</ul>
<a name="getPrjAdmUsers(int, java.lang.String, int, int, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPrjAdmUsers</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../util/AdmAccount.html" title="class in util">AdmAccount</a>&gt;&nbsp;getPrjAdmUsers(int&nbsp;projectId,
                                        java.lang.String&nbsp;roleId,
                                        int&nbsp;begin,
                                        int&nbsp;end,
                                        java.lang.String&nbsp;cuid,
                                        java.lang.String&nbsp;lastName)</pre>
</li>
</ul>
<a name="getUsers(int, java.lang.String, int, int, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUsers</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../util/OTPAccount.html" title="class in util">OTPAccount</a>&gt;&nbsp;getUsers(int&nbsp;projectId,
                                  java.lang.String&nbsp;roleId,
                                  int&nbsp;begin,
                                  int&nbsp;end,
                                  java.lang.String&nbsp;cuid,
                                  java.lang.String&nbsp;lastName)</pre>
</li>
</ul>
<a name="countUsers(int, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>countUsers</h4>
<pre>public&nbsp;int&nbsp;countUsers(int&nbsp;projectId,
             java.lang.String&nbsp;roleId,
             java.lang.String&nbsp;cuid)</pre>
</li>
</ul>
<a name="getUser(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUser</h4>
<pre>public&nbsp;<a href="../util/Person.html" title="class in util">Person</a>&nbsp;getUser(java.lang.String&nbsp;cuid)</pre>
</li>
</ul>
<a name="createProject(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createProject</h4>
<pre>public&nbsp;int&nbsp;createProject(java.lang.String&nbsp;projectName)</pre>
</li>
</ul>
<a name="updateProject(util.ProjectData)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateProject</h4>
<pre>public&nbsp;void&nbsp;updateProject(<a href="../util/ProjectData.html" title="class in util">ProjectData</a>&nbsp;infos)</pre>
</li>
</ul>
<a name="createPrjUser(util.AdmAccount)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createPrjUser</h4>
<pre>public&nbsp;int&nbsp;createPrjUser(<a href="../util/AdmAccount.html" title="class in util">AdmAccount</a>&nbsp;infos)</pre>
</li>
</ul>
<a name="updatePrjUser(util.AdmAccount)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updatePrjUser</h4>
<pre>public&nbsp;boolean&nbsp;updatePrjUser(<a href="../util/AdmAccount.html" title="class in util">AdmAccount</a>&nbsp;infos)</pre>
</li>
</ul>
<a name="createUser(util.OTPAccount)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createUser</h4>
<pre>public&nbsp;boolean&nbsp;createUser(<a href="../util/OTPAccount.html" title="class in util">OTPAccount</a>&nbsp;infos)</pre>
</li>
</ul>
<a name="updateUserActivity(java.lang.String, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateUserActivity</h4>
<pre>public&nbsp;boolean&nbsp;updateUserActivity(java.lang.String&nbsp;cuid,
                         boolean&nbsp;isActive)</pre>
</li>
</ul>
<a name="removeProject(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeProject</h4>
<pre>public&nbsp;boolean&nbsp;removeProject(int&nbsp;projectId)</pre>
</li>
</ul>
<a name="removePrjUser(java.lang.String, int, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removePrjUser</h4>
<pre>public&nbsp;boolean&nbsp;removePrjUser(java.lang.String&nbsp;cuid,
                    int&nbsp;projectId,
                    java.lang.String&nbsp;roleId)</pre>
</li>
</ul>
<a name="removeUserActivity(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeUserActivity</h4>
<pre>public&nbsp;boolean&nbsp;removeUserActivity(java.lang.String&nbsp;cuid)</pre>
</li>
</ul>
<a name="removeUser(java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>removeUser</h4>
<pre>public&nbsp;boolean&nbsp;removeUser(java.lang.String&nbsp;cuid)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DBAgent.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../business/Configuration.html" title="class in business"><span class="strong">Prev Class</span></a></li>
<li><a href="../business/DBMaintenanceJob.html" title="class in business"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?business/DBAgent.html" target="_top">Frames</a></li>
<li><a href="DBAgent.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
